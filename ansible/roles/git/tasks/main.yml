---

- name: (Darwin only) update homebrew and upgrade packages
  shell: brew update && brew upgrade
  when: ansible_os_family == "Darwin"
  ignore_errors: yes

- include: Darwin/install-git.yml
  when: ansible_os_family == "Darwin"

- include: Darwin/install-git.yml
  when: ansible_os_family == "Debian"

- name: (Darwin only) install wget with homebrew
  homebrew: name=wget state=present
  when: ansible_os_family == "Darwin"

- name: install ~/.gitconfig
  copy:
    src=gitconfig
    dest="{{ lookup('env','HOME') }}/.gitconfig"

- name: install ~/.gitignore_global
  copy:
    src=gitignore_global
    dest="{{ lookup('env','HOME') }}/.gitignore_global"

- name: download git-completion.bash git-prompt.sh
  uri:
    url="https://raw.githubusercontent.com/git/git/master/contrib/completion/{{ item.0 }}"
    dest="{{ lookup('env','HOME') }}/.bashrc.d/{{ item.1 }}"
  with_items:
    - [ [ 'git-completion.bash', 'completion.d/git-completion.bash' ] ]
    - [ [ 'git-prompt.sh', 'prompt.d/git-prompt.sh' ] ]
